# Development Environment - Database Only
# Start backend and frontend from your IDE for hot-reload and debugging
#
# Usage:
#   docker-compose -f docker-compose.dev.yml up -d
#
# Then in separate terminals:
#   Terminal 1: cd backend && cargo run
#   Terminal 2: cd frontend && trunk serve

version: '3.8'

services:
  surrealdb:
    image: surrealdb/surrealdb:v2.6.0
    container_name: royalpizza_db_dev
    ports:
      - "8000:8000"
    command: start --log debug --user root --pass root --bind 0.0.0.0:8000 memory
    environment:
      - SURREAL_LOG=debug
    networks:
      - royal_pizza_dev_network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 5s

networks:
  royal_pizza_dev_network:
    driver: bridge

# Development workflow:
# 1. Start database: docker-compose -f docker-compose.dev.yml up -d
# 2. Start backend: cd backend && cargo run
# 3. Start frontend: cd frontend && trunk serve
# 4. Access: Frontend at http://localhost:8080 (Trunk default), Backend API at http://localhost:8080
#
# Benefits:
# - Fast iteration with hot-reload
# - Full IDE debugging support
# - No Docker rebuild on code changes
# - Native Rust tooling (cargo check, clippy, etc.)
